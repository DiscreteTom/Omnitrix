(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{713:function(t,e,n){"use strict";n.r(e);var r=n(26);n(78),n(5),n(43),n(45),n(539),n(294),n(54),n(62),n(12),n(24),n(79),n(67),n(68),n(304);var o={data:function(){return{headers:[{text:"Index",value:"index",sortable:!1},{text:"From",value:"from",sortable:!1},{text:"To",value:"to",sortable:!1},{text:"Content",value:"content",sortable:!1},{text:"Actions",value:"actions",sortable:!1}],subtitles:[],loadingText:!1,currentIndex:0,video:null,loadingBcc:!1}},methods:{loadSubtitleText:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var o,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!=t&&null!==(o=t.target)&&void 0!==o&&null!==(c=o.files)&&void 0!==c&&c[0]){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,e.resetSubtitle(Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.target.files[0].text();case 2:n.sent.split("\n").map((function(line){return line.trim()})).filter((function(line){return 0!==line.length})).filter((function(line){return!line.startsWith("#")})).map((function(line){return e.subtitles.push({content:line,from:0,to:0})}));case 4:case"end":return n.stop()}}),n)}))));case 4:case"end":return n.stop()}}),n)})))()},updateVideoSrc:function(t){var e,n;if(null!=t&&null!==(e=t.target)&&void 0!==e&&null!==(n=e.files)&&void 0!==n&&n[0]){this.$refs.videoContainer.innerHTML="",this.video=document.createElement("video"),this.$refs.videoContainer.appendChild(this.video),this.video.controls=!0,this.video.width=620;var source=document.createElement("source");this.video.appendChild(source),source.src=URL.createObjectURL(t.target.files[0])}},applyFrom:function(){this.video?this.subtitles.length?(this.subtitles[this.currentIndex].from=this.video.currentTime.toFixed(2),0!==this.currentIndex&&0===this.subtitles[this.currentIndex-1].to&&(this.subtitles[this.currentIndex-1].to=this.video.currentTime.toFixed(2)),this.currentIndex==this.subtitles.length-1&&0===this.subtitles[this.currentIndex].to&&(this.subtitles[this.currentIndex].to=this.video.duration.toFixed(2)),this.currentIndex++,this.currentIndex%=this.subtitles.length):this.$bus.$emit("append-msg","No subtitle text."):this.$bus.$emit("append-msg","No video file.")},applyTo:function(){this.video?this.subtitles.length?(this.subtitles[this.currentIndex].from=this.video.currentTime.toFixed(2),this.currentIndex++,this.currentIndex%=this.subtitles.length):this.$bus.$emit("append-msg","No subtitle text."):this.$bus.$emit("append-msg","No video file.")},exportBcc:function(){var t={font_size:.4,font_color:"#FFFFFF",background_alpha:.5,background_color:"#9C27B0",Stroke:"none",body:this.subtitles.map((function(line){return{from:line.from,to:line.to,location:2,content:line.content}}))};!function(data,t,e){var n=new Blob([data],{type:e});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(n,t);else{var a=document.createElement("a"),r=URL.createObjectURL(n);a.href=r,a.download=t,document.body.appendChild(a),a.click(),setTimeout((function(){document.body.removeChild(a),window.URL.revokeObjectURL(r)}),0)}}(JSON.stringify(t),"subtitle.bcc","application/json")},importBcc:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var o,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!=t&&null!==(o=t.target)&&void 0!==o&&null!==(c=o.files)&&void 0!==c&&c[0]){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,e.resetSubtitle(Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.target.files[0].text();case 2:r=n.sent,e.subtitles=JSON.parse(r).body;case 4:case"end":return n.stop()}}),n)}))));case 4:case"end":return n.stop()}}),n)})))()},resetSubtitle:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.loadingBcc=!0,e.loadingText=!0,e.subtitles=[],e.currentIndex=0,n.next=6,t();case 6:e.loadingBcc=!1,e.loadingText=!1;case 8:case"end":return n.stop()}}),n)})))()}}},c=n(63),l=n(66),d=n.n(l),f=n(209),v=n(449),m=n(445),x=n(703),h=n(702),k=n(190),y=n(518),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex"},[n("div",{staticClass:"flex-shrink-0 mr-1",staticStyle:{width:"620px"}}),t._v(" "),n("div",{staticClass:"mr-1",staticStyle:{position:"fixed"}},[n("div",{ref:"videoContainer"},[n("video",{ref:"video",attrs:{controls:"",width:"620"}},[t._v("\n        Sorry, your browser doesn't support embedded videos,\n      ")])]),t._v(" "),n("v-btn",{staticClass:"my-3",attrs:{block:""},on:{click:function(e){return t.$refs.videoFileInput.click()}}},[t._v("\n      OPEN VIDEO FILE\n      "),n("input",{ref:"videoFileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"video/*"},on:{input:function(e){return t.updateVideoSrc(e)}}})]),t._v(" "),n("v-btn",{staticClass:"my-3",attrs:{block:"",loading:t.loadingText},on:{click:function(e){return t.$refs.textFileInput.click()}}},[t._v("\n      Import Subtitle Text\n      "),n("input",{ref:"textFileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"text/*,.md"},on:{input:function(e){return t.loadSubtitleText(e)}}})]),t._v(" "),n("v-btn",{staticClass:"my-3",attrs:{block:""},on:{click:t.applyFrom}},[t._v(" APPLY FROM ")]),t._v(" "),n("v-btn",{staticClass:"my-3",attrs:{block:""},on:{click:t.applyTo}},[t._v(" APPLY TO ")]),t._v(" "),n("v-btn",{staticClass:"my-3",attrs:{block:""},on:{click:t.exportBcc}},[t._v(" EXPORT BCC ")]),t._v(" "),n("v-btn",{staticClass:"my-3",attrs:{block:"",loading:t.loadingBcc},on:{click:function(e){return t.$refs.bccFileInput.click()}}},[t._v("\n      Import BCC\n      "),n("input",{ref:"bccFileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:".bcc,.json"},on:{change:function(e){return t.importBcc(e)}}})])],1),t._v(" "),n("div",{staticClass:"flex-grow-1 ml-1"},[n("v-data-table",{attrs:{headers:t.headers,items:t.subtitles,dense:"","hide-default-footer":"","items-per-page":-1},scopedSlots:t._u([{key:"item.index",fn:function(e){var r=e.index;return[r==t.currentIndex?n("v-icon",{attrs:{color:"green"}},[t._v("\n          mdi-arrow-right-thin\n        ")]):n("span",[t._v(" "+t._s(r+1)+" ")])]}},{key:"item.actions",fn:function(e){var r=e.index;return[n("div",{staticClass:"d-flex"},[n("v-btn",{staticClass:"mx-1",attrs:{icon:"",small:""},on:{click:function(e){t.currentIndex=r}}},[n("v-icon",{attrs:{dense:""}},[t._v("mdi-arrow-left-thin")])],1),t._v(" "),n("v-btn",{attrs:{icon:"",small:""},on:{click:function(e){return t.subtitles.splice(r,1)}}},[n("v-icon",{attrs:{dense:""}},[t._v("mdi-close")])],1)],1)]}},{key:"item.from",fn:function(e){return[n("v-edit-dialog",{attrs:{"return-value":e.item.from},on:{"update:returnValue":function(n){return t.$set(e.item,"from",n)},"update:return-value":function(n){return t.$set(e.item,"from",n)}},scopedSlots:t._u([{key:"input",fn:function(){return[n("v-text-field",{attrs:{"single-line":""},model:{value:e.item.from,callback:function(n){t.$set(e.item,"from",n)},expression:"props.item.from"}})]},proxy:!0}],null,!0)},[t._v("\n          "+t._s(e.item.from)+"\n          ")])]}},{key:"item.to",fn:function(e){return[n("v-edit-dialog",{attrs:{"return-value":e.item.to},on:{"update:returnValue":function(n){return t.$set(e.item,"to",n)},"update:return-value":function(n){return t.$set(e.item,"to",n)}},scopedSlots:t._u([{key:"input",fn:function(){return[n("v-text-field",{attrs:{"single-line":""},model:{value:e.item.to,callback:function(n){t.$set(e.item,"to",n)},expression:"props.item.to"}})]},proxy:!0}],null,!0)},[t._v("\n          "+t._s(e.item.to)+"\n          ")])]}},{key:"item.content",fn:function(e){return[n("v-edit-dialog",{attrs:{"return-value":e.item.content},on:{"update:returnValue":function(n){return t.$set(e.item,"content",n)},"update:return-value":function(n){return t.$set(e.item,"content",n)}},scopedSlots:t._u([{key:"input",fn:function(){return[n("v-text-field",{attrs:{"single-line":""},model:{value:e.item.content,callback:function(n){t.$set(e.item,"content",n)},expression:"props.item.content"}})]},proxy:!0}],null,!0)},[t._v("\n          "+t._s(e.item.content)+"\n          ")])]}}],null,!0)}),t._v(" "),n("v-card",[n("v-card-text",[n("v-btn",{attrs:{block:""},on:{click:function(e){t.subtitles.push({content:"",from:(0).toFixed(2),to:(0).toFixed(2)})}}},[t._v("\n          Add Line\n        ")])],1)],1)],1)])}),[],!1,null,null,null);e.default=component.exports;d()(component,{VBtn:f.a,VCard:v.a,VCardText:m.b,VDataTable:x.a,VEditDialog:h.a,VIcon:k.a,VTextField:y.a})}}]);